
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <link href='https://fonts.googleapis.com/css?family=Lexend' rel='stylesheet'>
    <link rel="stylesheet" th:href="@{/assets/songs/kol/main.css}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rhithmiq Music App</title>
</head>
<body>
<div class="block1">
    <div class="menu">
        <div class="appName"><a th:href="@{/}">Rhithmiq</a></div>
    </div>
    <div class="welcome-box">
        <div class="welcome-text">
            Welcome to the<br> Rhithmiq!<br>
        </div>
        <div class="app-description">
            It's a music app where you can find new music and compile it into your own playlists.
        </div>
        <div class="start-button">
            <a href="#page2">Get Started</a>
        </div>
    </div>
</div>

<div class="block2" id="page2">
    <div class="album-container">
        <div th:each="album : ${albums}" class="album">
            <img th:src="${album.coverUrl}" alt="Album Cover">
            <div th:text="${album.title}" class="album-title">Album Title</div>
        </div>
    </div>
    <div class="container">
        <div class="grid">
            <div class="cnop">
                <div class="buttonCreate">
                    <a th:href="@{/create-playlist}">Create playlist</a>
                    <div id="playlistModal" class="modal">
                        <div class="modal-content">
                            <span class="close">&times;</span>
                            <form th:action="@{/playlists/add}" method="post">
                                <label for="playlistName">Название плейлиста:</label>
                                <input type="text" id="playlistName" name="playlistName" required>
                                <button type="submit">Создать</button>
                            </form>
                        </div>
                    </div>

                </div>
                <div class="buttonCreate">
                    <a th:href="@{/create-album}">Create album</a>
                </div>

            </div>
            <div th:each="playlist : ${playlists}" class="playlist" th:text="${playlist.name}">Playlist Name</div>
        </div>
    </div>
</div>

<script>
    var modal = document.getElementById("playlistModal");

    var btn = document.getElementsByClassName("buttonCreate")[0];

    var span = document.getElementsByClassName("close")[0];

    btn.onclick = function() {
        modal.style.display = "block";
    }
    span.onclick = function() {
        modal.style.display = "none";
    }
    window.onclick = function(event) {
        if (event.target === modal) {
            modal.style.display = "none";
        }
    }

    function sendPlaylistData(playlistName) {

        fetch('/playlists/add', {
            method: 'POST',
            body: JSON.stringify({ name: playlistName }),
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(response => response.json())
            .then(data => {
                if(data.playlistId) {
                    addPlaylistButton(data.playlistId, playlistName);
                }
            })
            .catch(error => console.error('Error:', error));
    }


    function addPlaylistButton(playlistId, playlistName) {
        const playlistsContainer = document.getElementById('playlistsContainer');
        const newButton = document.createElement('button');
        newButton.textContent = playlistName;
        newButton.onclick = function() { /* логика для открытия плейлиста */ };
        playlistsContainer.appendChild(newButton);
    }

</script>

</body>
</html>
